let pokemonRepository = (function () {
  let t = [];
  function e(e) {
    if ("object" == typeof e && "name" in e && "detailsUrl" in e) {
      let n = { name: e.name, detailsUrl: e.detailsUrl };
      t.push(n);
    } else console.log("Invalid Pok\xe9mon");
  }
  function n() {
    return t;
  }
  function i(t) {
    return fetch(t.detailsUrl)
      .then(function (t) {
        return t.json();
      })
      .then(function (e) {
        (t.imageUrl = e.sprites.front_default),
          (t.height = e.height),
          (t.weight = e.weight),
          (t.type = e.types);
      })
      .catch(function (t) {
        console.error(t);
      });
  }
  function o(t) {
    i(t).then(function () {
      var e, n, i, o, a;
      let l, r, p, s, d, c, u, m;
      (e = t.name),
        (n = t.height),
        (i = t.weight),
        (o = t.type),
        (a = t.imageUrl),
        (l = $(".modal-title")),
        (r = $(".modal-body")),
        l.empty(),
        r.empty(),
        (p = $("<h1>" + e + "</h1>")),
        (s = $("<p>Height: " + n + " cm</p>")),
        (d = $("<p>Weight: " + i + " gram</p>")),
        (c = []),
        o.forEach((t) => c.push(t.type.name)),
        (u = $("<p>Types: " + c.join(", ").toUpperCase() + "</p>")),
        (m = document.createElement("img")).classList.add("image-pokemon"),
        m.setAttribute("src", a),
        m.setAttribute("width", "150"),
        m.setAttribute("height", "150"),
        m.setAttribute("alt", "Pokemon image"),
        l.append(p),
        r.append(s),
        r.append(d),
        r.append(u),
        r.append(m);
    });
  }
  return {
    add: e,
    getAll: n,
    addListItem: function t(e) {
      let n = document.querySelector(".pokemon-list"),
        i = document.createElement("li"),
        a = document.createElement("button");
      (a.innerText = e.name),
        a.classList.add(
          "pokemonButton",
          "btn",
          "btn-light",
          "btn-lg",
          "col-12"
        ),
        a.setAttribute("data-toggle", "modal"),
        a.setAttribute("data-target", "#modal-container"),
        i.classList.add("list-group-item"),
        i.appendChild(a),
        n.appendChild(i),
        a.addEventListener("click", function (t) {
          o(e);
        });
    },
    loadList: function t() {
      return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150")
        .then(function (t) {
          return t.json();
        })
        .then(function (t) {
          t.results.forEach(function (t) {
            e({ name: t.name, detailsUrl: t.url });
          });
        })
        .catch(function (t) {
          console.error(t);
        });
    },
    loadDetails: i,
    showDetails: o,
  };
})();
pokemonRepository.loadList().then(function () {
  pokemonRepository.getAll().forEach(function (t) {
    pokemonRepository.addListItem(t);
  });
});
